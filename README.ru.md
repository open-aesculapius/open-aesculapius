# Aesculapius [![en](https://img.shields.io/badge/en-ru-green.svg)](README.md)

Aesculapius - –æ—Ç–∫—Ä—ã—Ç–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–∏–∫—Ä–æ—Å–∫–æ–ø–∏—á–µ—Å–∫–∏—Ö –∏ –£–ó–ò-—Å–Ω–∏–º–∫–æ–≤.

# –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#installation)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è git hooks](#git-hooks)
    - [MacOS –∏–ª–∏ Linux](#hooks-unix)
    - [Windows](#hooks-windows)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏](#how-to-use)
- [–ü—Ä–∏–º–µ—Ä—ã –Ω–æ–≤—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞](#examples)
- [–ü–µ—Ä–µ—á–µ–Ω—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#list)
- [–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#requirements)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#license)
# <a name="installation">üìù –£—Å—Ç–∞–Ω–æ–≤–∫–∞</a>
1) –°–∫–∞—á–∞—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python 3.10
2) –°–∫–∞—á–∞—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Cuda 12.0+
3) –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```shellscript
git clone git@github.com:open-aesculapius/open-aesculapius.git

cd open-aesculapius
```
4) –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```shellscript
pip install virtualenv
virtualenv venv3 -p python3
```
5) –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

Windows:
```shellscript
venv3\Scripts\activate.bat
```
Linux:
```shellscript
source venv3/bin/activate
```
6) –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```shellscript
pip install -r requirements.txt
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è Windows —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤–µ—Ä—Å–∏—è PyTorch –¥–ª—è CPU. –î–ª—è —Ä–∞–±–æ—Ç—ã –º–æ–¥—É–ª–µ–π 
–Ω–∞ GPU –ø–æ—Å–µ—Ç–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π [—Å–∞–π—Ç](https://pytorch.org/get-started/previous-versions/) –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω—É–∂–Ω—É—é –≤–µ—Ä—Å–∏—é.

7) –°–±–æ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–∞ whl (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```shellscript
cd build 
```

- –î–ª—è Windows: 
```shellscript
build.bat
```
- –î–ª—è Ubuntu: 
```shellscript
./build.sh
```

- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞ (–ø–∞–∫–µ—Ç –ø–æ—è–≤–∏—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ dist)
```shellscript
pip install aesculapius-1.0.0-py3-none-any.whl
```

8) –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ test:
```shellscript 
cd test 
python module_testing.py
```

# <a name="git-hooks">üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è git hooks</a>
## –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∫–æ–º–º–∏—Ç–∞ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —à–∞–±–ª–æ–Ω—É '\<type>[scope]: \<description>' –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã git hooks. –í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –æ–ø–∏—Å–∞–Ω—ã —ç—Ç–∞–ø—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
## <a name="hooks-unix">MacOS –∏–ª–∏ Linux</a>
1. –°–¥–µ–ª–∞—Ç—å —Ñ–∞–π–ª .githooks/commit-msg –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
```shellscript
chmod +X .githooks/commit-msg
```
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ñ–∞–π–ª .githooks/hooks-init.sh
```shellscript
. .githooks/commit-msg
```
## <a name="hooks-windows">Windows</a>
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ñ–∞–π–ª —á–µ—Ä–µ–∑ PowerShell .githooks/hooks-init.sh
```shellscript
. .githooks/commit-msg
```
# <a name="how-to-use">üìù –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏</a>
–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–ª–∞—Å—Å–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏: 
- MicroscopicImage - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–∏–∫—Ä–æ—Å–∫–æ–ø–∏—á–µ—Å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π 
- UltrasoundImage - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –£–ó–ò –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π 

```shellscript
from aesculapius.modules.core.ms_img import MicroscopicImage
from aesculapius.modules.core.us_img import UltrasoundImage

m_image = MicroscopicImage("–ø—É—Ç—å_–∫_–ø–∞–ø–∫–µ_—Å_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏")
layers = m_image.get_layers()

us_image = UltrasoundImage("–ø—É—Ç—å_–∫_–ø–∞–ø–∫–µ_—Å_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏/–∏–ª–∏_–∫_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é")
us_layer = us_image.us_image
```
–ü—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: 

```shellscript
from aesculapius.aesculapius import (
    detect_perineuronal_cells,
    denoise_ultrasound_image,
    segment_gfap_microstructure,
)

cells = detect_perineuronal_cells(layers, config)

denoised = denoise_ultrasound_image(us_layer, config)

segmented = segment_gfap_microstructure(layers, config)
```

–§—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç YAML-–∫–æ–Ω—Ñ–∏–≥–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥–∞ (calculate_perineuronal_cell_depth.yaml):

```shellscript
folder_path: ../data/microscopic/perineuronal/cells_stack
out_path: ../data/out/calculate_perineuronal_cell_depth
weights: ../weights/cell_model.pkl
threshold: 0.7
```

# <a name="examples">üìù –ü—Ä–∏–º–µ—Ä—ã –Ω–æ–≤—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞</a>
–í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ [examples](examples) –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ø—Ä–∏–º–µ—Ä—ã, –¥–µ–º–æ—Å—Ç—Ä–∏—Ä—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Aesculapius. –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–º–µ—Ä–æ–≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤ [examples.ru.md](examples/examples.ru.md) —Ñ–∞–π–ª–µ.

–ó–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ—Ä–æ–≤ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–º–∞–Ω–¥—ã (–∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞): 

```shellscript
python -m examples.<–∏–º—è_–º–æ–¥—É–ª—è>
```
–ü—Ä–∏–º–µ—Ä: 
```shellscript
python -m examples.simple_apply_ultrasound_histogram_equalization 
```

# <a name="list">üìù –ü–µ—Ä–µ—á–µ–Ω—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: </a>

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –ø—Ä–∏–∫–ª–∞–¥–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö:

‚Ä¢ –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è ‚Äî –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –£–ó–ò-—Å–Ω–∏–º–∫–æ–≤, –≤–∫–ª—é—á–∞—è –ø–æ–≤—ã—à–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ —à—É–º–æ–≤, –∞ —Ç–∞–∫–∂–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏ –∑–Ω–∞—á–∏–º—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π.

‚Ä¢ –ê–Ω–∞–ª–∏–∑ –º–∏–∫—Ä–æ—Å–∫–æ–ø–∏—á–µ—Å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –≤–∫–ª—é—á–∞–µ—Ç –º–æ–¥—É–ª–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ –º–∏–∫—Ä–æ—Å–∫–æ–ø–∏—á–µ—Å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –∞—Å—Ç—Ä–æ—Ü–∏—Ç—ã –∏–ª–∏ —è—á–µ–π–∫–∏ –ø–µ—Ä–∏–Ω–µ–π—Ä–æ–Ω–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏.

‚Ä¢ –ù–∞—É—á–Ω—ã–µ –∏ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ ‚Äî –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞—É—á–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π, –∞ —Ç–∞–∫–∂–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –æ–±—É—á–µ–Ω–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –≤ –æ–±–ª–∞—Å—Ç–∏ —Ü–∏—Ñ—Ä–æ–≤–æ–π –º–µ–¥–∏—Ü–∏–Ω—ã –∏ –±–∏–æ–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏.


# <a name="requirements">üìù –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è: </a>

‚Ä¢ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä Intel –∏–ª–∏ AMD 2.3 –ì–ì—Ü x10 —è–¥–µ—Ä; –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å: 8 –ì–±; –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–∞ Nvidia RTX 4060; –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è –ø–∞–º—è—Ç—å SSD 512 –ì–±; –≤–µ—Ä—Å–∏—è –û–° –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ Windows 10 –∏–ª–∏ Ubuntu 22.04;

‚Ä¢ –Ω–∞–ª–∏—á–∏–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞ Python –≤–µ—Ä—Å–∏–∏ 3.10;

‚Ä¢ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏–∑ —Ñ–∞–π–ª–∞ requirements.txt.


# <a name="license">üìù –õ–∏—Ü–µ–Ω–∑–∏—è</a>
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ GPL-3.0 –ª–∏—Ü–µ–Ω–∑–∏–µ–π